@import "tailwindcss";
@tailwindcss;
@tailwind utilities;

/* ðŸ’¡ Font Variables + Theme */
:root {
  --font-primary: 'Fjalla One', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  --font-secondary: 'Inter', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;

  --background: #0a0a0a;
  --foreground: #ededed;
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

/* ===== Base / Resets ===== */
@layer base {
  html, body, #__next, #root {
    height: 100%;
  }

  html {
    font-family: var(--font-secondary);
  }

  body {
    @apply antialiased transition-colors duration-300;
    background: var(--background);
    color: var(--foreground);
  }

  /* Typographic hierarchy */
  h1, h2 { font-family: var(--font-primary); }
  h1 { @apply text-4xl leading-tight font-normal; }
  h2 { @apply text-3xl leading-tight font-normal; }
  h3 { @apply text-xl font-semibold leading-snug; }   /* Inter (secondary) */
  h4 { @apply text-base font-semibold leading-6; }    /* Inter (secondary) */
  p, li, code { @apply text-sm leading-5; }           /* compact body */
}

/* ===== Prose (Markdown) â€“ tighter spacing ===== */
/* Put the prose classes on the element (don't @apply them here) */
.prose :where(p)      { margin-top: 0.25rem; margin-bottom: 0.25rem; } /* 4px */
.prose :where(ul,ol)  { margin-top: 0.3rem;  margin-bottom: 0.3rem;  } /* ~5px */
.prose :where(li)     { margin-top: 0.15rem; margin-bottom: 0.15rem; } /* 2â€“3px */

.prose :where(h3)     { margin-top: 0.75rem; margin-bottom: 0.25rem; }
.prose :where(h4)     { margin-top: 0.5rem;  margin-bottom: 0.2rem;  }

.prose :where(pre)    { margin-top: 0.35rem; margin-bottom: 0.35rem; }
.prose :where(code)   { line-height: 1.25rem; }

.prose hr             { border-top: 1px solid rgba(255,255,255,.2); margin: 0.5rem 0; }
.prose :where(p + p)  { margin-top: 0.2rem; } /* even tighter consecutive paragraphs */

/* Optional: specific chat prose tweaks if you use .markdown-chat wrapper */
.markdown-chat :where(code) { font-size: 0.75rem; line-height: 1.25rem; }
.markdown-chat :where(pre)  { font-size: 0.75rem; line-height: 1.25rem; background: rgba(0,0,0,.3); border-radius: 0.75rem; padding: 0.75rem; }
.markdown-chat hr           { border-top: 1px solid rgba(255,255,255,.2); margin: 0.5rem 0; }

/* ===== Utilities & Effects ===== */
.scrollbar-none::-webkit-scrollbar { display: none; }
.scrollbar-none { -ms-overflow-style: none; scrollbar-width: none; }

.glitch-flicker {
  animation: flicker 0.15s infinite;
  font-family: monospace;
  font-weight: bold;
  color: #f4d35e;
  letter-spacing: 0.05em;
}
@keyframes flicker {
  0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% { opacity: 1; transform: scale(1); }
  20%, 22%, 55% { opacity: 0.3; transform: scale(1.05) skewX(-3deg); }
}

@layer utilities {
  .emotion-glow { animation: glowPulse 1.5s ease-in-out infinite; }
  .emotion-fade { opacity: 0.8; animation: fadeSlide 3s ease-in-out infinite; }
  .emotion-shake { animation: shake 0.3s infinite; }
  .emotion-blur { filter: blur(1px); opacity: 0.85; }
  .emotion-soft { background-color: rgba(240,248,255,0.3); box-shadow: 0 0 4px rgba(0,150,255,0.2); }

  @keyframes glowPulse { 0%,100%{ box-shadow:0 0 6px 2px rgba(255,223,0,.6);} 50%{ box-shadow:0 0 12px 6px rgba(255,223,0,.9);} }
  @keyframes fadeSlide { 0%,100%{ transform:translateY(0); opacity:.85;} 50%{ transform:translateY(-2px); opacity:.65;} }
  @keyframes shake { 0%,100%{ transform:translateX(0);} 25%{ transform:translateX(-2px);} 75%{ transform:translateX(2px);} }
}

/* ============================
   Ecodia Root Overlay theme
   (panel glass, gradients, buttons)
   ============================ */

:root {
  /* palette */
  --ec-black: #000;
  --ec-white: #fff;
  --ec-g1: #396041;
  --ec-g2: #7FD069;
  --ec-g3: #F4D35E;

  --ec-ink: #e9f4ec;
  --ec-muted: rgba(255,255,255,.78);
  --ec-edge: rgba(255,255,255,.10);
  --ec-card: rgba(255,255,255,.06);
  --ec-card-strong: rgba(14,20,16,.92);
  --ec-shadow-lg: 0 10px 28px rgba(0,0,0,.45);
}

/* container keeps page transparent so stars show through */
.ec-root {
  color: var(--ec-ink);
  background: transparent;
  font-family: var(--font-secondary, ui-sans-serif), system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
}

/* glassy panel */
.ec-panel {
  width: clamp(320px, 92vw, 640px);
  min-height: clamp(260px, 42vh, 520px);
  margin: 0 auto;
  padding: clamp(20px, 5vw, 36px);
  border-radius: 20px;
  position: relative;
  overflow: hidden;
  border: 1px solid var(--ec-edge);
  text-align: center;

  background:
    linear-gradient(180deg, rgba(14,20,16,.80), rgba(14,20,16,.66)) padding-box,
    radial-gradient(120% 160% at 20% 0%, rgba(127,208,105,.12), transparent 55%) padding-box,
    radial-gradient(140% 160% at 100% 100%, rgba(244,211,94,.10), transparent 60%) padding-box;

  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.03),
    var(--ec-shadow-lg);

  -webkit-backdrop-filter: blur(10px) saturate(1.02);
  backdrop-filter: blur(10px) saturate(1.02);
}

.ec-panel::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  border-radius: inherit;
  background:
    linear-gradient(115deg, transparent 0%, rgba(255,255,255,.12) 14%, rgba(255,255,255,.06) 22%, transparent 30%),
    radial-gradient(600px 140px at 22% -10%, rgba(127,208,105,.10), transparent 60%),
    radial-gradient(480px 160px at 120% 120%, rgba(244,211,94,.08), transparent 70%);
  mix-blend-mode: screen;
  opacity: .9;
}

/* title / lead use global fonts */
.ec-title {
  font-family: var(--font-primary, ui-sans-serif), system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  color: var(--ec-g3);
  font-size: clamp(2rem, 8vw, 2.6rem);
  letter-spacing: .2px;
  margin: 0 0 .5rem;
}

.ec-lead {
  color: var(--ec-muted);
  font-size: clamp(1rem, 2.6vw, 1.1rem);
  max-width: 60ch;
  margin: 0 auto 1rem;
}

/* actions */
.ec-actions {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: .6rem;
  margin-top: .6rem;
}

/* primary button */
.ec-btn {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .55rem;

  min-height: 44px;
  padding: .95rem 1.2rem;
  border-radius: 999px;
  color: #fff;
  text-decoration: none;

  width: min(100%, 520px);

  background:
    radial-gradient(120% 140% at 15% 15%, rgba(255,255,255,.12) 0%, transparent 55%),
    linear-gradient(135deg, var(--ec-g1) 0%, var(--ec-g2) 60%, var(--ec-g3) 100%);

  border: 1px solid rgba(0,0,0,.4);
  box-shadow: var(--ec-shadow-lg), inset 0 0 0 1px rgba(255,255,255,.06);
  overflow: hidden;
  isolation: isolate;

  cursor: pointer;
  transition: transform .2s ease, box-shadow .2s ease, filter .2s ease;
}

.ec-btn:hover {
  transform: translateY(-1px) scale(1.02);
  filter: saturate(1.05);
}

.ec-btn:focus-visible {
  outline: none;
  box-shadow:
    0 0 0 2px #000,
    0 0 0 5px rgba(127,208,105,.65);
}

.ec-btn::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  background: linear-gradient(115deg, transparent 0%, rgba(255,255,255,.18) 12%, rgba(255,255,255,.6) 18%, rgba(255,255,255,.2) 24%, transparent 30%);
  transform: translateX(-140%);
  transition: transform .6s ease;
}
.ec-btn:hover::after { transform: translateX(140%); }

/* secondary button */
.ec-btn--secondary {
  background: linear-gradient(135deg, rgba(57,96,65,.35), rgba(127,208,105,.25));
  color: var(--ec-ink);
  border: 1px solid var(--ec-edge);
}

/* responsive tweaks */
@media (min-width: 900px) {
  .ec-btn { width: min(100%, 560px); }
}

@media (prefers-reduced-motion: reduce) {
  .ec-btn, .ec-btn::after { transition: none; }
}
/* ============================
   Constellation Overlay Theme
   ============================ */

:root {
  --consto-ink: #e9f4ec;
  --consto-muted: rgba(255,255,255,.78);
  --consto-edge: rgba(255,255,255,.14);
  --consto-shadow: 0 10px 28px rgba(0,0,0,.45);

  /* core brand tints */
  --consto-g1: #396041;
  --consto-g2: #7FD069;
  --consto-g3: #F4D35E;

  /* surfaces */
  --consto-bg-strong: rgba(14,20,16,.92);
  --consto-chip-bg: rgba(255,255,255,.10);
  --consto-chip-bg-strong: rgba(255,255,255,.2);

  /* text */
  --consto-text-strong: #ffffff;
  --consto-text-soft: rgba(255,255,255,.9);

  /* light mode overrides (used by .consto--light) */
  --consto-light-text: rgba(0,0,0,.9);
  --consto-light-chip: rgba(0,0,0,.08);
  --consto-light-chip-hover: rgba(0,0,0,.16);
}

/* container keeps backdrop transparent so stars show through */
.consto {
  position: absolute;
  inset: 0;
  z-index: 10;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  pointer-events: none;
  padding-left: 1.5rem;  /* px-6 */
  padding-right: 1.5rem;
  background: transparent;
  color: var(--consto-text-soft);
  font-family: var(--font-secondary, ui-sans-serif), system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
}

/* light/dark variants */
.consto--dark { color: var(--consto-text-soft); }
.consto--light { color: var(--consto-light-text); }

/* top banner */
.consto-banner {
  padding-top: 7rem; /* pt-28 */
  text-align: center;
  pointer-events: none;
  position: relative;
  color: inherit;
}

.consto-banner__wrap {
  position: relative;
  display: inline-block;
}

.consto-banner__glow {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 0;
}
.consto--dark .consto-banner__glow::before,
.consto--light .consto-banner__glow::before {
  content: "";
  display: block;
  width: min(56ch, 72vw);
  height: 8px;
  border-radius: 999px;
  filter: blur(10px);
  background: linear-gradient(90deg, var(--consto-g3), rgba(244,211,94,.9), var(--consto-g3));
}

.consto-banner__text {
  position: relative;
  z-index: 1;
  font-family: var(--font-primary, ui-sans-serif), system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  font-size: clamp(0.9rem, 1.8vw, 1rem);
  line-height: 1.6;
  opacity: .9;
}

/* floating pills (back + info) */
.consto-pill {
  position: absolute;
  top: 1rem; /* ~top-4 */
  width: 2.25rem;
  height: 2.25rem;
  border-radius: 999px;
  border: 1px solid var(--consto-edge);
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: auto;
  box-shadow: var(--consto-shadow);
  -webkit-backdrop-filter: blur(8px) saturate(1.05);
  backdrop-filter: blur(8px) saturate(1.05);
  transition: transform .15s ease, background .15s ease, color .15s ease;
  font-weight: 700;
  font-family: var(--font-secondary, ui-sans-serif), system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
}

/* left button (back) */
.consto-pill--nav {
  left: 1rem;
}
/* right button (info) */
.consto-pill--info {
  right: 1.25rem;
  width: 1.75rem;
  height: 1.75rem;
  top: 1.75rem; /* visually align with title glow */
  font-weight: 600;
  font-size: 0.95rem;
}

.consto--dark .consto-pill { background: rgba(255,255,255,.08); color: var(--consto-text-strong); }
.consto--dark .consto-pill:hover { transform: scale(1.05); background: rgba(255,255,255,.12); }

.consto--light .consto-pill { background: var(--consto-light-chip); color: var(--consto-light-text); }
.consto--light .consto-pill:hover { transform: scale(1.05); background: var(--consto-light-chip-hover); }

/* action area (bottom) */
.consto-actions {
  pointer-events: auto;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: .5rem;
  margin: 0 auto 1rem;
}

/* buttons */
.consto-btn {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .5rem;
  padding: .8rem 1.1rem;
  min-height: 42px;
  border-radius: 999px;
  font-family: var(--font-secondary, ui-sans-serif), system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  font-weight: 600;
  letter-spacing: .01em;
  cursor: pointer;
  transition: transform .18s ease, filter .18s ease, box-shadow .18s ease, background .18s ease, color .18s ease;
  border: 1px solid rgba(0,0,0,.35);
  box-shadow: var(--consto-shadow), inset 0 0 0 1px rgba(255,255,255,.06);
}

/* gradient primary */
.consto-btn--primary {
  color: #000;
  background:
    radial-gradient(120% 140% at 18% 18%, rgba(255,255,255,.18) 0%, transparent 55%),
    linear-gradient(135deg, var(--consto-g1) 0%, var(--consto-g2) 60%, var(--consto-g3) 100%);
  border-color: rgba(0,0,0,.45);
}
.consto-btn--primary:hover { transform: translateY(-1px) scale(1.02); filter: saturate(1.06); }
.consto-btn--primary:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px #000, 0 0 0 5px rgba(127,208,105,.65);
}

/* ghost / secondary (used for Generate button) */
.consto--dark .consto-btn--ghost {
  background: rgba(255,255,255,.08);
  color: var(--consto-text-strong);
  border-color: var(--consto-edge);
}
.consto--dark .consto-btn--ghost:hover { background: rgba(255,255,255,.12); }

.consto--light .consto-btn--ghost {
  background: var(--consto-light-chip);
  color: var(--consto-light-text);
  border-color: rgba(0,0,0,.15);
}
.consto--light .consto-btn--ghost:hover { background: var(--consto-light-chip-hover); }

/* error toast-ish */
.consto-error {
  margin-top: .25rem;
  font-size: 0.85rem;
  color: #ffd6a0;
  background: rgba(255, 140, 0, 0.08);
  border: 1px solid rgba(255, 140, 0, 0.22);
  padding: .5rem .75rem;
  border-radius: .75rem;
  backdrop-filter: blur(6px) saturate(1.05);
}

/* ============================
   Consent overlay
   ============================ */
.consto-consent {
  position: fixed;
  inset: 0;
  z-index: 50;
  background: rgba(0,0,0,.9);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1.5rem; /* p-6 */
}

.consto-consent__card {
  width: 100%;
  max-width: 40rem; /* ~max-w-xl */
  text-align: center;
  background:
    linear-gradient(180deg, rgba(14,20,16,.80), rgba(14,20,16,.66)) padding-box,
    radial-gradient(120% 160% at 20% 0%, rgba(127,208,105,.12), transparent 55%) padding-box,
    radial-gradient(140% 160% at 100% 100%, rgba(244,211,94,.10), transparent 60%) padding-box;
  border: 1px solid var(--consto-edge);
  border-radius: 1rem;
  padding: 1.5rem;
  box-shadow: var(--consto-shadow), inset 0 0 0 1px rgba(255,255,255,.03);
  -webkit-backdrop-filter: blur(10px) saturate(1.02);
  backdrop-filter: blur(10px) saturate(1.02);
}

.consto-consent__title {
  margin: 0 0 .75rem;
  font-size: 1.5rem;
  font-weight: 700;
  text-shadow: 0 0 10px rgba(255,255,255,.6);
  font-family: var(--font-primary, ui-sans-serif), system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
}

.consto-consent__body {
  color: rgba(255,255,255,.9);
  font-size: .95rem;
  line-height: 1.55;
  margin: 0 auto .75rem;
  max-width: 60ch;
  font-family: var(--font-secondary, ui-sans-serif), system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
}

.consto-consent__fineprint {
  color: rgba(255,255,255,.7);
  font-size: .8rem;
  margin-bottom: 1rem;
}

.consto-consent .consto-btn--primary {
  color: #000;
}
/* ===============================
   Ecodia â€” Return Overlay (retorno)
   =============================== */

:root {
  --ret-ink: #e9f4ec;
  --ret-muted: rgba(255,255,255,.78);
  --ret-edge: rgba(255,255,255,.10);
  --ret-shadow: 0 10px 28px rgba(0,0,0,.45);

  /* brand gradients */
  --ret-g1: #396041;
  --ret-g2: #7FD069;
  --ret-g3: #F4D35E;

  /* cards/surfaces */
  --ret-card-strong: rgba(14,20,16,.92);
}

/* root container keeps backdrop transparent for star canvas */
.retorno {
  position: absolute;
  inset: 0;
  z-index: 50;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  background: transparent;
  color: var(--ret-ink);
  font-family: var(--font-secondary, ui-sans-serif), system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
}

/* top-left helpers */
.retorno-topbar {
  position: absolute;
  top: 1rem;
  left: 1rem;
  display: flex;
  gap: .5rem;
  pointer-events: auto;
}

/* layout wrapper */
.retorno-wrap {
  width: 100%;
  pointer-events: auto;
}

/* glass panel */
.retorno-panel {
  width: clamp(320px, 92vw, 640px);
  min-height: clamp(260px, 42vh, 560px);
  max-height: min(88vh, 720px);
  margin: 0 auto;
  padding: clamp(20px, 5vw, 36px);
  border-radius: 20px;
  position: relative;
  overflow: hidden;
  border: 1px solid var(--ret-edge);
  background:
    linear-gradient(180deg, rgba(14,20,16,.80), rgba(14,20,16,.66)) padding-box,
    radial-gradient(120% 160% at 20% 0%, rgba(127,208,105,.12), transparent 55%) padding-box,
    radial-gradient(140% 160% at 100% 100%, rgba(244,211,94,.10), transparent 60%) padding-box;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.03), var(--ret-shadow);
  -webkit-backdrop-filter: blur(10px) saturate(1.02);
  backdrop-filter: blur(10px) saturate(1.02);
  text-align: center;
}

.retorno-panel::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  border-radius: inherit;
  background:
    linear-gradient(115deg, transparent 0%, rgba(255,255,255,.12) 14%, rgba(255,255,255,.06) 22%, transparent 30%),
    radial-gradient(600px 140px at 22% -10%, rgba(127,208,105,.10), transparent 60%),
    radial-gradient(480px 160px at 120% 120%, rgba(244,211,94,.08), transparent 70%);
  opacity: .9;
  mix-blend-mode: screen;
}

/* title */
.retorno-title {
  font-family: var(--font-primary, ui-sans-serif), system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  color: var(--ret-g3);
  font-size: clamp(1.6rem, 5vw, 2.2rem);
  letter-spacing: .2px;
  margin: 0 0 .8rem;
  font-weight: 400;
}

/* form */
.retorno-form {
  display: grid;
  gap: .7rem;
  place-items: center;
  margin-top: .2rem;
}

.retorno-input {
  width: min(100%, 460px);
  min-height: 44px;
  padding: .9rem 1.1rem;
  border-radius: 14px;
  color: var(--ret-ink);
  text-align: center;
  border: 1px solid var(--ret-edge);
  background:
    linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04)) padding-box,
    rgba(14,20,16,.35);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.03);
  -webkit-backdrop-filter: blur(8px) saturate(1.02);
  backdrop-filter: blur(8px) saturate(1.02);
  font-family: var(--font-secondary, ui-sans-serif), system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
}

.retorno-input::placeholder { color: rgba(233,244,236,.6); }
.retorno-input:focus { outline: none; }
.retorno-input:focus-visible {
  box-shadow: 0 0 0 2px #000, 0 0 0 5px rgba(127,208,105,.65);
}

/* primary button (gradient) */
.retorno-btn {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .55rem;
  min-height: 44px;
  padding: .95rem 1.2rem;
  width: min(100%, 460px);
  border-radius: 999px;
  color: #fff;
  text-decoration: none;
  background:
    radial-gradient(120% 140% at 15% 15%, rgba(255,255,255,.12) 0%, transparent 55%),
    linear-gradient(135deg, var(--ret-g1) 0%, var(--ret-g2) 60%, var(--ret-g3) 100%);
  border: 1px solid rgba(0,0,0,.4);
  box-shadow: var(--ret-shadow), inset 0 0 0 1px rgba(255,255,255,.06);
  overflow: hidden;
  transition: transform .2s ease, box-shadow .2s ease, filter .2s ease;
  isolation: isolate;
  cursor: pointer;
  font-family: var(--font-secondary, ui-sans-serif), system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  font-weight: 600;
}

.retorno-btn:hover { transform: translateY(-1px) scale(1.02); filter: saturate(1.05); }
.retorno-btn:focus-visible { outline: none; box-shadow: 0 0 0 2px #000, 0 0 0 5px rgba(127,208,105,.65); }

.retorno-btn::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  background: linear-gradient(115deg, transparent 0%, rgba(255,255,255,.18) 12%, rgba(255,255,255,.6) 18%, rgba(255,255,255,.2) 24%, transparent 30%);
  transform: translateX(-140%);
  transition: transform .6s ease;
}
.retorno-btn:hover::after { transform: translateX(140%); }
.retorno-btn[disabled] { opacity: .7; cursor: not-allowed; filter: grayscale(.08); }

/* messages */
.retorno-error { color: #ff9ca0; font-size: .9rem; margin-top: .2rem; }
.retorno-matched { color: var(--ret-muted); }

/* motion/accessibility */
@media (prefers-reduced-motion: reduce) {
  .retorno-btn, .retorno-btn::after { transition: none; }
}
/* ===============================
   Ecodia â€” Hub Overlay (hubo)
   =============================== */

:root {
  /* palette & surfaces */
  --hub-ink: #e9f4ec;
  --hub-muted: rgba(255,255,255,.78);
  --hub-edge: rgba(255,255,255,.10);
  --hub-shadow: 0 10px 28px rgba(0,0,0,.45);

  /* brand gradient stops */
  --hub-g1: #396041;
  --hub-g2: #7FD069;
  --hub-g3: #F4D35E;
}

/* transparent root so star canvas shows through */
.hubo {
  position: absolute;
  inset: 0;
  z-index: 10;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  background: transparent;
  color: var(--hub-ink);
  font-family: var(--font-secondary, ui-sans-serif), system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
}
/* Fix Hub overlay click-through */
.hubo-topbar {
  position: absolute;
  top: 0;
  left: 0;
  /* don't cover the whole screen */
  right: auto;
  bottom: auto;

  /* let only the buttons receive events */
  pointer-events: none;

  display: flex;
  gap: .5rem;
  padding: 1rem;
  align-items: flex-start;
  justify-content: flex-start;
  z-index: 20; /* keep above the panel visuals */
}
.hubo-topbar > * {
  pointer-events: auto; /* restore interactivity to the buttons */
}
/* Hub overlay floating controls */
.hub-controls{
  position: fixed;
  top: env(safe-area-inset-top, 1rem);
  right: calc(env(safe-area-inset-right, 0px) + 1rem);
  display: flex;
  gap: .5rem;
  z-index: 60; /* above panel */
}
@media (max-width: 480px){
  .hub-controls{ gap: .4rem; right: .75rem; top: .75rem; }
}
/* ===== Constellation consent modal ===== */
.ecodia-modal-backdrop{
  position: fixed; inset: 0;
  background: linear-gradient(180deg, rgba(0,0,0,.75), rgba(0,0,0,.55));
  backdrop-filter: blur(4px);
  display: grid; place-items: center;
}
.ecodia-modal{
  position: relative;
  width: min(680px, 92vw);
  padding: clamp(20px, 5vw, 32px);
  border-radius: 20px;
  color: var(--foreground);
  border: 1px solid rgba(255,255,255,.1);
  background:
    linear-gradient(180deg, rgba(14,20,16,.86), rgba(14,20,16,.7)) padding-box,
    radial-gradient(120% 160% at 20% 0%, rgba(127,208,105,.12), transparent 55%) padding-box,
    radial-gradient(140% 160% at 100% 100%, rgba(244,211,94,.10), transparent 60%) padding-box;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.03), 0 10px 28px rgba(0,0,0,.45);
  text-align: center;
}
.ecodia-modal__close{
  position: absolute; top: .75rem; right: .75rem;
  width: 36px; height: 36px; border-radius: 999px;
  display: grid; place-items: center;
  font-size: 20px; line-height: 1;
  color: var(--foreground);
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.12);
  cursor: pointer;
  transition: transform .15s ease, background .15s ease, opacity .15s ease;
}
.ecodia-modal__close:hover{ transform: scale(1.05); background: rgba(255,255,255,.12); }
.ecodia-modal__close:disabled{ opacity:.6; cursor: not-allowed; }

.ecodia-modal__title{
  font-family: var(--font-primary);
  color: #F4D35E;
  font-size: clamp(1.6rem, 5vw, 2.2rem);
  margin: 0 0 .6rem;
}
.ecodia-modal__body{
  color: rgba(255,255,255,.9);
  font-family: var(--font-secondary);
  font-size: .95rem;
  line-height: 1.5;
  margin: 0 auto .5rem;
  max-width: 60ch;
}
.ecodia-modal__hint{
  color: rgba(255,255,255,.65);
  font-size: .8rem;
  margin-bottom: 1rem;
}
.ecodia-modal__cta{
  position: relative;
  display: inline-flex; align-items: center; justify-content: center;
  min-height: 44px; padding: .9rem 1.2rem;
  border-radius: 999px; color: #fff;
  background:
    radial-gradient(120% 140% at 15% 15%, rgba(255,255,255,.12) 0%, transparent 55%),
    linear-gradient(135deg, #396041 0%, #7FD069 60%, #F4D35E 100%);
  border: 1px solid rgba(0,0,0,.4);
  box-shadow: 0 10px 28px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.06);
  overflow: hidden;
  cursor: pointer;
  transition: transform .2s ease, filter .2s ease, box-shadow .2s ease;
}
.ecodia-modal__cta:hover{ transform: translateY(-1px) scale(1.02); filter: saturate(1.05); }
.ecodia-modal__cta:disabled{ opacity: .7; cursor: not-allowed; filter: grayscale(.05); }
.ecodia-modal__cta::after{
  content:""; position:absolute; inset:0; border-radius: inherit; pointer-events:none;
  background: linear-gradient(115deg, transparent 0%, rgba(255,255,255,.18) 12%, rgba(255,255,255,.6) 18%, rgba(255,255,255,.2) 24%, transparent 30%);
  transform: translateX(-140%); transition: transform .6s ease;
}
.ecodia-modal__cta:hover::after{ transform: translateX(140%); }


/* wrapper for focus/stacking */
.hubo-wrap {
  pointer-events: auto;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* glass panel */
.hubo-panel {
  width: clamp(320px, 92vw, 640px);
  min-height: clamp(260px, 42vh, 560px);
  max-height: min(88vh, 720px);
  margin-inline: auto;
  padding: clamp(20px, 5vw, 36px);
  border-radius: 20px;
  position: relative;
  overflow: hidden;

  border: 1px solid var(--hub-edge);
  background:
    linear-gradient(180deg, rgba(14,20,16,.80), rgba(14,20,16,.66)) padding-box,
    radial-gradient(120% 160% at 20% 0%, rgba(127,208,105,.12), transparent 55%) padding-box,
    radial-gradient(140% 160% at 100% 100%, rgba(244,211,94,.10), transparent 60%) padding-box;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.03), var(--hub-shadow);
  -webkit-backdrop-filter: blur(10px) saturate(1.02);
  backdrop-filter: blur(10px) saturate(1.02);
  text-align: center;
}

.hubo-panel::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  border-radius: inherit;
  background:
    linear-gradient(115deg, transparent 0%, rgba(255,255,255,.12) 14%, rgba(255,255,255,.06) 22%, transparent 30%),
    radial-gradient(600px 140px at 22% -10%, rgba(127,208,105,.10), transparent 60%),
    radial-gradient(480px 160px at 120% 120%, rgba(244,211,94,.08), transparent 70%);
  opacity: .9;
  mix-blend-mode: screen;
}

/* title uses global primary font */
.hubo-title {
  font-family: var(--font-primary, ui-sans-serif), system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  color: var(--hub-g3);
  font-size: clamp(1.6rem, 5vw, 2.2rem);
  letter-spacing: .2px;
  margin: 0 0 .8rem;
  font-weight: 400;
}

/* actions */
.hubo-actions {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: .6rem;
  margin-top: .4rem;
}

/* primary button */
.hubo-btn {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .55rem;

  min-height: 42px;
  padding: .9rem 1.2rem;
  width: 100%;
  max-width: 260px;

  border-radius: 999px;
  color: #fff;
  text-decoration: none;

  background:
    radial-gradient(120% 140% at 15% 15%, rgba(255,255,255,.12) 0%, transparent 55%),
    linear-gradient(135deg, var(--hub-g1) 0%, var(--hub-g2) 60%, var(--hub-g3) 100%);
  border: 1px solid rgba(0,0,0,.4);
  box-shadow: var(--hub-shadow), inset 0 0 0 1px rgba(255,255,255,.06);

  overflow: hidden;
  transition: transform .2s ease, box-shadow .2s ease, filter .2s ease;
  isolation: isolate;
  cursor: pointer;

  font-family: var(--font-secondary, ui-sans-serif), system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  font-weight: 600;
}

.hubo-btn:hover { transform: translateY(-1px) scale(1.02); filter: saturate(1.05); }
.hubo-btn:focus-visible { outline: none; box-shadow: 0 0 0 2px #000, 0 0 0 5px rgba(127,208,105,.65); }

.hubo-btn::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  background: linear-gradient(115deg, transparent 0%, rgba(255,255,255,.18) 12%, rgba(255,255,255,.6) 18%, rgba(255,255,255,.2) 24%, transparent 30%);
  transform: translateX(-140%);
  transition: transform .6s ease;
}
.hubo-btn:hover::after { transform: translateX(140%); }

/* secondary button (subtle glass) */
.hubo-btn--secondary {
  background: linear-gradient(135deg, rgba(57,96,65,.35), rgba(127,208,105,.25));
  color: var(--hub-ink);
  border: 1px solid var(--hub-edge);
}

@media (prefers-reduced-motion: reduce) {
  .hubo-btn, .hubo-btn::after { transition: none; }
}
/* somewhere loaded with the bubble */
.markdown-chat ul,
.markdown-chat ol { list-style-position: outside; padding-left: 1.25rem; }

.markdown-chat li { display: list-item; } /* defeats any global `display:block` on li */
.markdown-chat ul,
.markdown-chat ol { list-style-position: outside; padding-left: 1.25rem; margin: 0.5rem 0; }
.markdown-chat ul { list-style-type: disc; }
.markdown-chat ol { list-style-type: decimal; }
.markdown-chat li { display: list-item; margin: 0.25rem 0; }
.markdown-chat hr { margin: 0.75rem 0; }
/* =========================================
   1) Lock the page â€” no global scrollbar
   ========================================= */
html, body, :root {
  height: 100dvh;
  overflow: hidden;        /* kill main scrollbar */
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

body {
  margin: 0;
  padding: 0;
  overscroll-behavior: none;
}

/* =========================================
   2) Chat scroll area (no top gap)
   - Must be used on a flex child with `flex-1 min-h-0`
   ========================================= */
.chat-scroll {
  position: relative;
  overflow-y: auto;
  padding: 0;              /* no internal padding -> no top gap */
  margin: 0;               /* no external gap */
  min-height: 0;           /* CRUCIAL in flex layouts to avoid cropping */
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

/* =========================================
   3) Hide scrollbars for the chat scroller
   ========================================= */
.hide-scrollbar {
  -ms-overflow-style: none;   /* IE/Edge */
  scrollbar-width: none;      /* Firefox */
}
.hide-scrollbar::-webkit-scrollbar {
  width: 0;
  height: 0;
  display: none;              /* Chrome/Safari */
}

/* =========================================
   4) Bottom-only transparent fade (content mask)
   - Transparent ONLY at the very bottom
   - Fully opaque above, so no visible top gap
   ========================================= */
.chat-mask-bottom-fade {
  --chat-fade-bottom: 12px; /* adjust fade length */

  -webkit-mask-image: linear-gradient(
    to bottom,
    rgba(0,0,0,1) 0,
    rgba(0,0,0,1) calc(100% - var(--chat-fade-bottom)),
    rgba(0,0,0,0) 100%
  );
  mask-image: linear-gradient(
    to bottom,
    rgba(0,0,0,1) 0,
    rgba(0,0,0,1) calc(100% - var(--chat-fade-bottom)),
    rgba(0,0,0,0) 100%
  );
}

/* =========================================
   5) Input bar wrapper (max width + centered)
   ========================================= */
.input-bar-wrap {
  width: 100%;
  max-width: 48rem;     /* ~768px; tweak as needed */
  margin: 0 auto;
  padding: 0 1rem;      /* side breathing room on mobile */
}

/* =========================================
   6) (Optional) Utility: hide scrollbars anywhere
   ========================================= */
.scrollbar-none {
  scrollbar-width: none;
}
.scrollbar-none::-webkit-scrollbar {
  width: 0;
  height: 0;
  display: none;
}
