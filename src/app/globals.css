@import "tailwindcss";
@tailwindcss;
@tailwind utilities;

/* ðŸ’¡ Font Variables + Theme */
:root {
  --font-primary: 'Fjalla One', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  --font-secondary: 'Inter', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;

  --background: #0a0a0a;
  --foreground: #ededed;
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

/* ===== Base / Resets ===== */
@layer base {
  html, body, #__next, #root {
    height: 100%;
  }

  html {
    font-family: var(--font-secondary);
  }

  body {
    @apply antialiased transition-colors duration-300;
    background: var(--background);
    color: var(--foreground);
  }

  /* Typographic hierarchy */
  h1, h2 { font-family: var(--font-primary); }
  h1 { @apply text-4xl leading-tight font-normal; }
  h2 { @apply text-3xl leading-tight font-normal; }
  h3 { @apply text-xl font-semibold leading-snug; }   /* Inter (secondary) */
  h4 { @apply text-base font-semibold leading-6; }    /* Inter (secondary) */
  p, li, code { @apply text-sm leading-5; }           /* compact body */
}

/* ===== Prose (Markdown) â€“ tighter spacing ===== */
/* Put the prose classes on the element (don't @apply them here) */
.prose :where(p)      { margin-top: 0.25rem; margin-bottom: 0.25rem; } /* 4px */
.prose :where(ul,ol)  { margin-top: 0.3rem;  margin-bottom: 0.3rem;  } /* ~5px */
.prose :where(li)     { margin-top: 0.15rem; margin-bottom: 0.15rem; } /* 2â€“3px */

.prose :where(h3)     { margin-top: 0.75rem; margin-bottom: 0.25rem; }
.prose :where(h4)     { margin-top: 0.5rem;  margin-bottom: 0.2rem;  }

.prose :where(pre)    { margin-top: 0.35rem; margin-bottom: 0.35rem; }
.prose :where(code)   { line-height: 1.25rem; }

.prose hr             { border-top: 1px solid rgba(255,255,255,.2); margin: 0.5rem 0; }
.prose :where(p + p)  { margin-top: 0.2rem; } /* even tighter consecutive paragraphs */

/* Optional: specific chat prose tweaks if you use .markdown-chat wrapper */
.markdown-chat :where(code) { font-size: 0.75rem; line-height: 1.25rem; }
.markdown-chat :where(pre)  { font-size: 0.75rem; line-height: 1.25rem; background: rgba(0,0,0,.3); border-radius: 0.75rem; padding: 0.75rem; }
.markdown-chat hr           { border-top: 1px solid rgba(255,255,255,.2); margin: 0.5rem 0; }

/* ===== Utilities & Effects ===== */
.scrollbar-none::-webkit-scrollbar { display: none; }
.scrollbar-none { -ms-overflow-style: none; scrollbar-width: none; }

.glitch-flicker {
  animation: flicker 0.15s infinite;
  font-family: monospace;
  font-weight: bold;
  color: #f4d35e;
  letter-spacing: 0.05em;
}
@keyframes flicker {
  0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% { opacity: 1; transform: scale(1); }
  20%, 22%, 55% { opacity: 0.3; transform: scale(1.05) skewX(-3deg); }
}

@layer utilities {
  .emotion-glow { animation: glowPulse 1.5s ease-in-out infinite; }
  .emotion-fade { opacity: 0.8; animation: fadeSlide 3s ease-in-out infinite; }
  .emotion-shake { animation: shake 0.3s infinite; }
  .emotion-blur { filter: blur(1px); opacity: 0.85; }
  .emotion-soft { background-color: rgba(240,248,255,0.3); box-shadow: 0 0 4px rgba(0,150,255,0.2); }

  @keyframes glowPulse { 0%,100%{ box-shadow:0 0 6px 2px rgba(255,223,0,.6);} 50%{ box-shadow:0 0 12px 6px rgba(255,223,0,.9);} }
  @keyframes fadeSlide { 0%,100%{ transform:translateY(0); opacity:.85;} 50%{ transform:translateY(-2px); opacity:.65;} }
  @keyframes shake { 0%,100%{ transform:translateX(0);} 25%{ transform:translateX(-2px);} 75%{ transform:translateX(2px);} }
}

/* ============================
   Ecodia Root Overlay theme
   (panel glass, gradients, buttons)
   ============================ */

:root {
  /* palette */
  --ec-black: #000;
  --ec-white: #fff;
  --ec-g1: #396041;
  --ec-g2: #7FD069;
  --ec-g3: #F4D35E;

  --ec-ink: #e9f4ec;
  --ec-muted: rgba(255,255,255,.78);
  --ec-edge: rgba(255,255,255,.10);
  --ec-card: rgba(255,255,255,.06);
  --ec-card-strong: rgba(14,20,16,.92);
  --ec-shadow-lg: 0 10px 28px rgba(0,0,0,.45);
}

/* container keeps page transparent so stars show through */
.ec-root {
  color: var(--ec-ink);
  background: transparent;
  font-family: var(--font-secondary, ui-sans-serif), system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
}

/* glassy panel */
.ec-panel {
  width: clamp(320px, 92vw, 640px);
  min-height: clamp(260px, 42vh, 520px);
  margin: 0 auto;
  padding: clamp(20px, 5vw, 36px);
  border-radius: 20px;
  position: relative;
  overflow: hidden;
  border: 1px solid var(--ec-edge);
  text-align: center;

  background:
    linear-gradient(180deg, rgba(14,20,16,.80), rgba(14,20,16,.66)) padding-box,
    radial-gradient(120% 160% at 20% 0%, rgba(127,208,105,.12), transparent 55%) padding-box,
    radial-gradient(140% 160% at 100% 100%, rgba(244,211,94,.10), transparent 60%) padding-box;

  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.03),
    var(--ec-shadow-lg);

  -webkit-backdrop-filter: blur(10px) saturate(1.02);
  backdrop-filter: blur(10px) saturate(1.02);
}

.ec-panel::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  border-radius: inherit;
  background:
    linear-gradient(115deg, transparent 0%, rgba(255,255,255,.12) 14%, rgba(255,255,255,.06) 22%, transparent 30%),
    radial-gradient(600px 140px at 22% -10%, rgba(127,208,105,.10), transparent 60%),
    radial-gradient(480px 160px at 120% 120%, rgba(244,211,94,.08), transparent 70%);
  mix-blend-mode: screen;
  opacity: .9;
}

/* title / lead use global fonts */
.ec-title {
  font-family: var(--font-primary, ui-sans-serif), system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  color: var(--ec-g3);
  font-size: clamp(2rem, 8vw, 2.6rem);
  letter-spacing: .2px;
  margin: 0 0 .5rem;
}

.ec-lead {
  color: var(--ec-muted);
  font-size: clamp(1rem, 2.6vw, 1.1rem);
  max-width: 60ch;
  margin: 0 auto 1rem;
}

/* actions */
.ec-actions {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: .6rem;
  margin-top: .6rem;
}

/* primary button */
.ec-btn {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .55rem;

  min-height: 44px;
  padding: .95rem 1.2rem;
  border-radius: 999px;
  color: #fff;
  text-decoration: none;

  width: min(100%, 520px);

  background:
    radial-gradient(120% 140% at 15% 15%, rgba(255,255,255,.12) 0%, transparent 55%),
    linear-gradient(135deg, var(--ec-g1) 0%, var(--ec-g2) 60%, var(--ec-g3) 100%);

  border: 1px solid rgba(0,0,0,.4);
  box-shadow: var(--ec-shadow-lg), inset 0 0 0 1px rgba(255,255,255,.06);
  overflow: hidden;
  isolation: isolate;

  cursor: pointer;
  transition: transform .2s ease, box-shadow .2s ease, filter .2s ease;
}

.ec-btn:hover {
  transform: translateY(-1px) scale(1.02);
  filter: saturate(1.05);
}

.ec-btn:focus-visible {
  outline: none;
  box-shadow:
    0 0 0 2px #000,
    0 0 0 5px rgba(127,208,105,.65);
}

.ec-btn::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  background: linear-gradient(115deg, transparent 0%, rgba(255,255,255,.18) 12%, rgba(255,255,255,.6) 18%, rgba(255,255,255,.2) 24%, transparent 30%);
  transform: translateX(-140%);
  transition: transform .6s ease;
}
.ec-btn:hover::after { transform: translateX(140%); }

/* secondary button */
.ec-btn--secondary {
  background: linear-gradient(135deg, rgba(57,96,65,.35), rgba(127,208,105,.25));
  color: var(--ec-ink);
  border: 1px solid var(--ec-edge);
}

/* responsive tweaks */
@media (min-width: 900px) {
  .ec-btn { width: min(100%, 560px); }
}

@media (prefers-reduced-motion: reduce) {
  .ec-btn, .ec-btn::after { transition: none; }
}
/* ============================
   Constellation Overlay Theme
   ============================ */

:root {
  --consto-ink: #e9f4ec;
  --consto-muted: rgba(255,255,255,.78);
  --consto-edge: rgba(255,255,255,.14);
  --consto-shadow: 0 10px 28px rgba(0,0,0,.45);

  /* core brand tints */
  --consto-g1: #396041;
  --consto-g2: #7FD069;
  --consto-g3: #F4D35E;

  /* surfaces */
  --consto-bg-strong: rgba(14,20,16,.92);
  --consto-chip-bg: rgba(255,255,255,.10);
  --consto-chip-bg-strong: rgba(255,255,255,.2);

  /* text */
  --consto-text-strong: #ffffff;
  --consto-text-soft: rgba(255,255,255,.9);

  /* light mode overrides (used by .consto--light) */
  --consto-light-text: rgba(0,0,0,.9);
  --consto-light-chip: rgba(0,0,0,.08);
  --consto-light-chip-hover: rgba(0,0,0,.16);
}

/* container keeps backdrop transparent so stars show through */
.consto {
  position: absolute;
  inset: 0;
  z-index: 10;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  pointer-events: none;
  padding-left: 1.5rem;  /* px-6 */
  padding-right: 1.5rem;
  background: transparent;
  color: var(--consto-text-soft);
  font-family: var(--font-secondary, ui-sans-serif), system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
}

/* light/dark variants */
.consto--dark { color: var(--consto-text-soft); }
.consto--light { color: var(--consto-light-text); }

/* top banner */
.consto-banner {
  padding-top: 7rem; /* pt-28 */
  text-align: center;
  pointer-events: none;
  position: relative;
  color: inherit;
}

.consto-banner__wrap {
  position: relative;
  display: inline-block;
}

.consto-banner__glow {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 0;
}
.consto--dark .consto-banner__glow::before,
.consto--light .consto-banner__glow::before {
  content: "";
  display: block;
  width: min(56ch, 72vw);
  height: 8px;
  border-radius: 999px;
  filter: blur(10px);
  background: linear-gradient(90deg, var(--consto-g3), rgba(244,211,94,.9), var(--consto-g3));
}

.consto-banner__text {
  position: relative;
  z-index: 1;
  font-family: var(--font-primary, ui-sans-serif), system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  font-size: clamp(0.9rem, 1.8vw, 1rem);
  line-height: 1.6;
  opacity: .9;
}

/* floating pills (back + info) */
.consto-pill {
  position: absolute;
  top: 1rem; /* ~top-4 */
  width: 2.25rem;
  height: 2.25rem;
  border-radius: 999px;
  border: 1px solid var(--consto-edge);
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: auto;
  box-shadow: var(--consto-shadow);
  -webkit-backdrop-filter: blur(8px) saturate(1.05);
  backdrop-filter: blur(8px) saturate(1.05);
  transition: transform .15s ease, background .15s ease, color .15s ease;
  font-weight: 700;
  font-family: var(--font-secondary, ui-sans-serif), system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
}

/* left button (back) */
.consto-pill--nav {
  left: 1rem;
}
/* right button (info) */
.consto-pill--info {
  right: 1.25rem;
  width: 1.75rem;
  height: 1.75rem;
  top: 1.75rem; /* visually align with title glow */
  font-weight: 600;
  font-size: 0.95rem;
}

.consto--dark .consto-pill { background: rgba(255,255,255,.08); color: var(--consto-text-strong); }
.consto--dark .consto-pill:hover { transform: scale(1.05); background: rgba(255,255,255,.12); }

.consto--light .consto-pill { background: var(--consto-light-chip); color: var(--consto-light-text); }
.consto--light .consto-pill:hover { transform: scale(1.05); background: var(--consto-light-chip-hover); }

/* action area (bottom) */
.consto-actions {
  pointer-events: auto;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: .5rem;
  margin: 0 auto 1rem;
}

/* buttons */
.consto-btn {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .5rem;
  padding: .8rem 1.1rem;
  min-height: 42px;
  border-radius: 999px;
  font-family: var(--font-secondary, ui-sans-serif), system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  font-weight: 600;
  letter-spacing: .01em;
  cursor: pointer;
  transition: transform .18s ease, filter .18s ease, box-shadow .18s ease, background .18s ease, color .18s ease;
  border: 1px solid rgba(0,0,0,.35);
  box-shadow: var(--consto-shadow), inset 0 0 0 1px rgba(255,255,255,.06);
}

/* gradient primary */
.consto-btn--primary {
  color: #000;
  background:
    radial-gradient(120% 140% at 18% 18%, rgba(255,255,255,.18) 0%, transparent 55%),
    linear-gradient(135deg, var(--consto-g1) 0%, var(--consto-g2) 60%, var(--consto-g3) 100%);
  border-color: rgba(0,0,0,.45);
}
.consto-btn--primary:hover { transform: translateY(-1px) scale(1.02); filter: saturate(1.06); }
.consto-btn--primary:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px #000, 0 0 0 5px rgba(127,208,105,.65);
}

/* ghost / secondary (used for Generate button) */
.consto--dark .consto-btn--ghost {
  background: rgba(255,255,255,.08);
  color: var(--consto-text-strong);
  border-color: var(--consto-edge);
}
.consto--dark .consto-btn--ghost:hover { background: rgba(255,255,255,.12); }

.consto--light .consto-btn--ghost {
  background: var(--consto-light-chip);
  color: var(--consto-light-text);
  border-color: rgba(0,0,0,.15);
}
.consto--light .consto-btn--ghost:hover { background: var(--consto-light-chip-hover); }

/* error toast-ish */
.consto-error {
  margin-top: .25rem;
  font-size: 0.85rem;
  color: #ffd6a0;
  background: rgba(255, 140, 0, 0.08);
  border: 1px solid rgba(255, 140, 0, 0.22);
  padding: .5rem .75rem;
  border-radius: .75rem;
  backdrop-filter: blur(6px) saturate(1.05);
}

/* ============================
   Consent overlay
   ============================ */
.consto-consent {
  position: fixed;
  inset: 0;
  z-index: 50;
  background: rgba(0,0,0,.9);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1.5rem; /* p-6 */
}

.consto-consent__card {
  width: 100%;
  max-width: 40rem; /* ~max-w-xl */
  text-align: center;
  background:
    linear-gradient(180deg, rgba(14,20,16,.80), rgba(14,20,16,.66)) padding-box,
    radial-gradient(120% 160% at 20% 0%, rgba(127,208,105,.12), transparent 55%) padding-box,
    radial-gradient(140% 160% at 100% 100%, rgba(244,211,94,.10), transparent 60%) padding-box;
  border: 1px solid var(--consto-edge);
  border-radius: 1rem;
  padding: 1.5rem;
  box-shadow: var(--consto-shadow), inset 0 0 0 1px rgba(255,255,255,.03);
  -webkit-backdrop-filter: blur(10px) saturate(1.02);
  backdrop-filter: blur(10px) saturate(1.02);
}

.consto-consent__title {
  margin: 0 0 .75rem;
  font-size: 1.5rem;
  font-weight: 700;
  text-shadow: 0 0 10px rgba(255,255,255,.6);
  font-family: var(--font-primary, ui-sans-serif), system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
}

.consto-consent__body {
  color: rgba(255,255,255,.9);
  font-size: .95rem;
  line-height: 1.55;
  margin: 0 auto .75rem;
  max-width: 60ch;
  font-family: var(--font-secondary, ui-sans-serif), system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
}

.consto-consent__fineprint {
  color: rgba(255,255,255,.7);
  font-size: .8rem;
  margin-bottom: 1rem;
}

.consto-consent .consto-btn--primary {
  color: #000;
}
/* ===============================
   Ecodia â€” Return Overlay (retorno)
   =============================== */

:root {
  --ret-ink: #e9f4ec;
  --ret-muted: rgba(255,255,255,.78);
  --ret-edge: rgba(255,255,255,.10);
  --ret-shadow: 0 10px 28px rgba(0,0,0,.45);

  /* brand gradients */
  --ret-g1: #396041;
  --ret-g2: #7FD069;
  --ret-g3: #F4D35E;

  /* cards/surfaces */
  --ret-card-strong: rgba(14,20,16,.92);
}

/* root container keeps backdrop transparent for star canvas */
.retorno {
  position: absolute;
  inset: 0;
  z-index: 50;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  background: transparent;
  color: var(--ret-ink);
  font-family: var(--font-secondary, ui-sans-serif), system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
}

/* top-left helpers */
.retorno-topbar {
  position: absolute;
  top: 1rem;
  left: 1rem;
  display: flex;
  gap: .5rem;
  pointer-events: auto;
}

/* layout wrapper */
.retorno-wrap {
  width: 100%;
  pointer-events: auto;
}

/* glass panel */
.retorno-panel {
  width: clamp(320px, 92vw, 640px);
  min-height: clamp(260px, 42vh, 560px);
  max-height: min(88vh, 720px);
  margin: 0 auto;
  padding: clamp(20px, 5vw, 36px);
  border-radius: 20px;
  position: relative;
  overflow: hidden;
  border: 1px solid var(--ret-edge);
  background:
    linear-gradient(180deg, rgba(14,20,16,.80), rgba(14,20,16,.66)) padding-box,
    radial-gradient(120% 160% at 20% 0%, rgba(127,208,105,.12), transparent 55%) padding-box,
    radial-gradient(140% 160% at 100% 100%, rgba(244,211,94,.10), transparent 60%) padding-box;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.03), var(--ret-shadow);
  -webkit-backdrop-filter: blur(10px) saturate(1.02);
  backdrop-filter: blur(10px) saturate(1.02);
  text-align: center;
}

.retorno-panel::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  border-radius: inherit;
  background:
    linear-gradient(115deg, transparent 0%, rgba(255,255,255,.12) 14%, rgba(255,255,255,.06) 22%, transparent 30%),
    radial-gradient(600px 140px at 22% -10%, rgba(127,208,105,.10), transparent 60%),
    radial-gradient(480px 160px at 120% 120%, rgba(244,211,94,.08), transparent 70%);
  opacity: .9;
  mix-blend-mode: screen;
}

/* title */
.retorno-title {
  font-family: var(--font-primary, ui-sans-serif), system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  color: var(--ret-g3);
  font-size: clamp(1.6rem, 5vw, 2.2rem);
  letter-spacing: .2px;
  margin: 0 0 .8rem;
  font-weight: 400;
}

/* form */
.retorno-form {
  display: grid;
  gap: .7rem;
  place-items: center;
  margin-top: .2rem;
}

.retorno-input {
  width: min(100%, 460px);
  min-height: 44px;
  padding: .9rem 1.1rem;
  border-radius: 14px;
  color: var(--ret-ink);
  text-align: center;
  border: 1px solid var(--ret-edge);
  background:
    linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04)) padding-box,
    rgba(14,20,16,.35);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.03);
  -webkit-backdrop-filter: blur(8px) saturate(1.02);
  backdrop-filter: blur(8px) saturate(1.02);
  font-family: var(--font-secondary, ui-sans-serif), system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
}

.retorno-input::placeholder { color: rgba(233,244,236,.6); }
.retorno-input:focus { outline: none; }
.retorno-input:focus-visible {
  box-shadow: 0 0 0 2px #000, 0 0 0 5px rgba(127,208,105,.65);
}

/* primary button (gradient) */
.retorno-btn {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .55rem;
  min-height: 44px;
  padding: .95rem 1.2rem;
  width: min(100%, 460px);
  border-radius: 999px;
  color: #fff;
  text-decoration: none;
  background:
    radial-gradient(120% 140% at 15% 15%, rgba(255,255,255,.12) 0%, transparent 55%),
    linear-gradient(135deg, var(--ret-g1) 0%, var(--ret-g2) 60%, var(--ret-g3) 100%);
  border: 1px solid rgba(0,0,0,.4);
  box-shadow: var(--ret-shadow), inset 0 0 0 1px rgba(255,255,255,.06);
  overflow: hidden;
  transition: transform .2s ease, box-shadow .2s ease, filter .2s ease;
  isolation: isolate;
  cursor: pointer;
  font-family: var(--font-secondary, ui-sans-serif), system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  font-weight: 600;
}

.retorno-btn:hover { transform: translateY(-1px) scale(1.02); filter: saturate(1.05); }
.retorno-btn:focus-visible { outline: none; box-shadow: 0 0 0 2px #000, 0 0 0 5px rgba(127,208,105,.65); }

.retorno-btn::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  background: linear-gradient(115deg, transparent 0%, rgba(255,255,255,.18) 12%, rgba(255,255,255,.6) 18%, rgba(255,255,255,.2) 24%, transparent 30%);
  transform: translateX(-140%);
  transition: transform .6s ease;
}
.retorno-btn:hover::after { transform: translateX(140%); }
.retorno-btn[disabled] { opacity: .7; cursor: not-allowed; filter: grayscale(.08); }

/* messages */
.retorno-error { color: #ff9ca0; font-size: .9rem; margin-top: .2rem; }
.retorno-matched { color: var(--ret-muted); }

/* motion/accessibility */
@media (prefers-reduced-motion: reduce) {
  .retorno-btn, .retorno-btn::after { transition: none; }
}
/* ===============================
   Ecodia â€” Hub Overlay (hubo)
   =============================== */

:root {
  /* palette & surfaces */
  --hub-ink: #e9f4ec;
  --hub-muted: rgba(255,255,255,.78);
  --hub-edge: rgba(255,255,255,.10);
  --hub-shadow: 0 10px 28px rgba(0,0,0,.45);

  /* brand gradient stops */
  --hub-g1: #396041;
  --hub-g2: #7FD069;
  --hub-g3: #F4D35E;
}

/* transparent root so star canvas shows through */
.hubo {
  position: absolute;
  inset: 0;
  z-index: 10;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  background: transparent;
  color: var(--hub-ink);
  font-family: var(--font-secondary, ui-sans-serif), system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
}
/* Fix Hub overlay click-through */
.hubo-topbar {
  position: absolute;
  top: 0;
  left: 0;
  /* don't cover the whole screen */
  right: auto;
  bottom: auto;

  /* let only the buttons receive events */
  pointer-events: none;

  display: flex;
  gap: .5rem;
  padding: 1rem;
  align-items: flex-start;
  justify-content: flex-start;
  z-index: 20; /* keep above the panel visuals */
}
.hubo-topbar > * {
  pointer-events: auto; /* restore interactivity to the buttons */
}
/* Hub overlay floating controls */
.hub-controls{
  position: fixed;
  top: env(safe-area-inset-top, 1rem);
  right: calc(env(safe-area-inset-right, 0px) + 1rem);
  display: flex;
  gap: .5rem;
  z-index: 60; /* above panel */
}
@media (max-width: 480px){
  .hub-controls{ gap: .4rem; right: .75rem; top: .75rem; }
}
/* ===== Constellation consent modal ===== */
.ecodia-modal-backdrop{
  position: fixed; inset: 0;
  background: linear-gradient(180deg, rgba(0,0,0,.75), rgba(0,0,0,.55));
  backdrop-filter: blur(4px);
  display: grid; place-items: center;
}
.ecodia-modal{
  position: relative;
  width: min(680px, 92vw);
  padding: clamp(20px, 5vw, 32px);
  border-radius: 20px;
  color: var(--foreground);
  border: 1px solid rgba(255,255,255,.1);
  background:
    linear-gradient(180deg, rgba(14,20,16,.86), rgba(14,20,16,.7)) padding-box,
    radial-gradient(120% 160% at 20% 0%, rgba(127,208,105,.12), transparent 55%) padding-box,
    radial-gradient(140% 160% at 100% 100%, rgba(244,211,94,.10), transparent 60%) padding-box;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.03), 0 10px 28px rgba(0,0,0,.45);
  text-align: center;
}
.ecodia-modal__close{
  position: absolute; top: .75rem; right: .75rem;
  width: 36px; height: 36px; border-radius: 999px;
  display: grid; place-items: center;
  font-size: 20px; line-height: 1;
  color: var(--foreground);
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.12);
  cursor: pointer;
  transition: transform .15s ease, background .15s ease, opacity .15s ease;
}
.ecodia-modal__close:hover{ transform: scale(1.05); background: rgba(255,255,255,.12); }
.ecodia-modal__close:disabled{ opacity:.6; cursor: not-allowed; }

.ecodia-modal__title{
  font-family: var(--font-primary);
  color: #F4D35E;
  font-size: clamp(1.6rem, 5vw, 2.2rem);
  margin: 0 0 .6rem;
}
.ecodia-modal__body{
  color: rgba(255,255,255,.9);
  font-family: var(--font-secondary);
  font-size: .95rem;
  line-height: 1.5;
  margin: 0 auto .5rem;
  max-width: 60ch;
}
.ecodia-modal__hint{
  color: rgba(255,255,255,.65);
  font-size: .8rem;
  margin-bottom: 1rem;
}
.ecodia-modal__cta{
  position: relative;
  display: inline-flex; align-items: center; justify-content: center;
  min-height: 44px; padding: .9rem 1.2rem;
  border-radius: 999px; color: #fff;
  background:
    radial-gradient(120% 140% at 15% 15%, rgba(255,255,255,.12) 0%, transparent 55%),
    linear-gradient(135deg, #396041 0%, #7FD069 60%, #F4D35E 100%);
  border: 1px solid rgba(0,0,0,.4);
  box-shadow: 0 10px 28px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.06);
  overflow: hidden;
  cursor: pointer;
  transition: transform .2s ease, filter .2s ease, box-shadow .2s ease;
}
.ecodia-modal__cta:hover{ transform: translateY(-1px) scale(1.02); filter: saturate(1.05); }
.ecodia-modal__cta:disabled{ opacity: .7; cursor: not-allowed; filter: grayscale(.05); }
.ecodia-modal__cta::after{
  content:""; position:absolute; inset:0; border-radius: inherit; pointer-events:none;
  background: linear-gradient(115deg, transparent 0%, rgba(255,255,255,.18) 12%, rgba(255,255,255,.6) 18%, rgba(255,255,255,.2) 24%, transparent 30%);
  transform: translateX(-140%); transition: transform .6s ease;
}
.ecodia-modal__cta:hover::after{ transform: translateX(140%); }


/* wrapper for focus/stacking */
.hubo-wrap {
  pointer-events: auto;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* glass panel */
.hubo-panel {
  width: clamp(320px, 92vw, 640px);
  min-height: clamp(260px, 42vh, 560px);
  max-height: min(88vh, 720px);
  margin-inline: auto;
  padding: clamp(20px, 5vw, 36px);
  border-radius: 20px;
  position: relative;
  overflow: hidden;

  border: 1px solid var(--hub-edge);
  background:
    linear-gradient(180deg, rgba(14,20,16,.80), rgba(14,20,16,.66)) padding-box,
    radial-gradient(120% 160% at 20% 0%, rgba(127,208,105,.12), transparent 55%) padding-box,
    radial-gradient(140% 160% at 100% 100%, rgba(244,211,94,.10), transparent 60%) padding-box;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.03), var(--hub-shadow);
  -webkit-backdrop-filter: blur(10px) saturate(1.02);
  backdrop-filter: blur(10px) saturate(1.02);
  text-align: center;
}

.hubo-panel::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  border-radius: inherit;
  background:
    linear-gradient(115deg, transparent 0%, rgba(255,255,255,.12) 14%, rgba(255,255,255,.06) 22%, transparent 30%),
    radial-gradient(600px 140px at 22% -10%, rgba(127,208,105,.10), transparent 60%),
    radial-gradient(480px 160px at 120% 120%, rgba(244,211,94,.08), transparent 70%);
  opacity: .9;
  mix-blend-mode: screen;
}

/* title uses global primary font */
.hubo-title {
  font-family: var(--font-primary, ui-sans-serif), system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  color: var(--hub-g3);
  font-size: clamp(1.6rem, 5vw, 2.2rem);
  letter-spacing: .2px;
  margin: 0 0 .8rem;
  font-weight: 400;
}

/* actions */
.hubo-actions {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: .6rem;
  margin-top: .4rem;
}

/* primary button */
.hubo-btn {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .55rem;

  min-height: 42px;
  padding: .9rem 1.2rem;
  width: 100%;
  max-width: 260px;

  border-radius: 999px;
  color: #fff;
  text-decoration: none;

  background:
    radial-gradient(120% 140% at 15% 15%, rgba(255,255,255,.12) 0%, transparent 55%),
    linear-gradient(135deg, var(--hub-g1) 0%, var(--hub-g2) 60%, var(--hub-g3) 100%);
  border: 1px solid rgba(0,0,0,.4);
  box-shadow: var(--hub-shadow), inset 0 0 0 1px rgba(255,255,255,.06);

  overflow: hidden;
  transition: transform .2s ease, box-shadow .2s ease, filter .2s ease;
  isolation: isolate;
  cursor: pointer;

  font-family: var(--font-secondary, ui-sans-serif), system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  font-weight: 600;
}

.hubo-btn:hover { transform: translateY(-1px) scale(1.02); filter: saturate(1.05); }
.hubo-btn:focus-visible { outline: none; box-shadow: 0 0 0 2px #000, 0 0 0 5px rgba(127,208,105,.65); }

.hubo-btn::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  background: linear-gradient(115deg, transparent 0%, rgba(255,255,255,.18) 12%, rgba(255,255,255,.6) 18%, rgba(255,255,255,.2) 24%, transparent 30%);
  transform: translateX(-140%);
  transition: transform .6s ease;
}
.hubo-btn:hover::after { transform: translateX(140%); }

/* secondary button (subtle glass) */
.hubo-btn--secondary {
  background: linear-gradient(135deg, rgba(57,96,65,.35), rgba(127,208,105,.25));
  color: var(--hub-ink);
  border: 1px solid var(--hub-edge);
}

@media (prefers-reduced-motion: reduce) {
  .hubo-btn, .hubo-btn::after { transition: none; }
}
/* somewhere loaded with the bubble */
.markdown-chat ul,
.markdown-chat ol { list-style-position: outside; padding-left: 1.25rem; }

.markdown-chat li { display: list-item; } /* defeats any global `display:block` on li */
.markdown-chat ul,
.markdown-chat ol { list-style-position: outside; padding-left: 1.25rem; margin: 0.5rem 0; }
.markdown-chat ul { list-style-type: disc; }
.markdown-chat ol { list-style-type: decimal; }
.markdown-chat li { display: list-item; margin: 0.25rem 0; }
.markdown-chat hr { margin: 0.75rem 0; }
/* =========================================
   1) Lock the page â€” no global scrollbar
   ========================================= */
html, body, :root {
  height: 100dvh;
  overflow: hidden;        /* kill main scrollbar */
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

body {
  margin: 0;
  padding: 0;
  overscroll-behavior: none;
}

/* =========================================
   2) Chat scroll area (no top gap)
   - Must be used on a flex child with `flex-1 min-h-0`
   ========================================= */
.chat-scroll {
  position: relative;
  overflow-y: auto;
  padding: 0;              /* no internal padding -> no top gap */
  margin: 0;               /* no external gap */
  min-height: 0;           /* CRUCIAL in flex layouts to avoid cropping */
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

/* =========================================
   3) Hide scrollbars for the chat scroller
   ========================================= */
.hide-scrollbar {
  -ms-overflow-style: none;   /* IE/Edge */
  scrollbar-width: none;      /* Firefox */
}
.hide-scrollbar::-webkit-scrollbar {
  width: 0;
  height: 0;
  display: none;              /* Chrome/Safari */
}

/* =========================================
   4) Bottom-only transparent fade (content mask)
   - Transparent ONLY at the very bottom
   - Fully opaque above, so no visible top gap
   ========================================= */
.chat-mask-bottom-fade {
  --chat-fade-bottom: 12px; /* adjust fade length */

  -webkit-mask-image: linear-gradient(
    to bottom,
    rgba(0,0,0,1) 0,
    rgba(0,0,0,1) calc(100% - var(--chat-fade-bottom)),
    rgba(0,0,0,0) 100%
  );
  mask-image: linear-gradient(
    to bottom,
    rgba(0,0,0,1) 0,
    rgba(0,0,0,1) calc(100% - var(--chat-fade-bottom)),
    rgba(0,0,0,0) 100%
  );
}

/* =========================================
   5) Input bar wrapper (max width + centered)
   ========================================= */
.input-bar-wrap {
  width: 100%;
  max-width: 48rem;     /* ~768px; tweak as needed */
  margin: 0 auto;
  padding: 0 1rem;      /* side breathing room on mobile */
}

/* =========================================
   6) (Optional) Utility: hide scrollbars anywhere
   ========================================= */
.scrollbar-none {
  scrollbar-width: none;
}
.scrollbar-none::-webkit-scrollbar {
  width: 0;
  height: 0;
  display: none;
}

/* === Ecodia Root Overlay â€” Sunrise Solarpunk === */
.ec-root {
  --ec-mint: #7fd069;
  --ec-gold: #f4d35e;
  --ec-pearl: #f5f8f7;
  --ec-ink: #0e1511;

  --ec-panel-bg: rgba(255, 255, 255, 0.55);
  --ec-panel-blur: 18px;
  --ec-panel-radius: 28px;

  --tiltX: 0deg; /* set from JS */
  --tiltY: 0deg; /* set from JS */
  --shineX: 50%;
  --shineY: 50%;
}

.ec-panel {
  position: relative;
  width: min(780px, 92vw);
  padding: clamp(28px, 4.2vw, 42px) clamp(24px, 4vw, 40px);
  border-radius: var(--ec-panel-radius);
  backdrop-filter: blur(var(--ec-panel-blur));
  -webkit-backdrop-filter: blur(var(--ec-panel-blur));
  background:
    linear-gradient(180deg, rgba(255,255,255,0.66), rgba(255,255,255,0.34)) border-box;
  box-shadow:
    0 30px 70px rgba(18, 60, 40, 0.16),
    inset 0 1px 0 rgba(255,255,255,0.6);
  transform: perspective(1200px) rotateX(var(--tiltX)) rotateY(var(--tiltY));
  transition: transform 200ms cubic-bezier(.2,.8,.2,1), box-shadow 200ms ease;
}
.ec-panel:hover {
  box-shadow:
    0 40px 90px rgba(18, 60, 40, 0.20),
    inset 0 1px 0 rgba(255,255,255,0.75);
}

/* Gradient energy seam around the panel */
.ec-border::before {
  content: '';
  position: absolute;
  inset: -1px;
  border-radius: calc(var(--ec-panel-radius) + 1px);
  padding: 1px;
  background:
    conic-gradient(
      from 180deg at 50% 50%,
      rgba(127,208,105,0.0) 0deg,
      rgba(127,208,105,0.55) 60deg,
      rgba(244,211,94,0.65) 160deg,
      rgba(127,208,105,0.55) 260deg,
      rgba(127,208,105,0.0) 360deg
    );
  -webkit-mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
          mask-composite: exclude;
  animation: ec-slow-rotate 9s linear infinite;
  pointer-events: none;
}
@keyframes ec-slow-rotate {
  from { transform: rotate(0deg); }
  to   { transform: rotate(360deg); }
}

/* Moving specular shine (follows pointer via CSS vars) */
.ec-shine::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: var(--ec-panel-radius);
  background: radial-gradient(
    260px 160px at var(--shineX) var(--shineY),
    rgba(255,255,255,0.35),
    rgba(255,255,255,0.06) 45%,
    transparent 60%
  );
  mix-blend-mode: soft-light;
  pointer-events: none;
}

/* Typography */
.ec-title {
  font-weight: 800;
  letter-spacing: 0.02em;
  line-height: 1.05;
  color: var(--ec-ink);
  background: linear-gradient(180deg, #0e1511, #2a3c2f);
  -webkit-background-clip: text;
          background-clip: text;
  -webkit-text-fill-color: transparent;
  font-size: clamp(36px, 6vw, 62px);
  margin: 4px 0 6px;
}

.ec-lead {
  color: #143524;
  opacity: 0.85;
  font-size: clamp(16px, 2.2vw, 20px);
  letter-spacing: 0.01em;
  margin-bottom: clamp(18px, 3vw, 28px);
}

/* Buttons */
.ec-actions {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  margin-top: 4px;
}
.ec-btn {
  position: relative;
  border: 0;
  border-radius: 14px;
  font-weight: 700;
  letter-spacing: 0.02em;
  padding: 14px 18px;
  color: #0a120e;
  background: linear-gradient(90deg, var(--ec-mint), var(--ec-gold));
  box-shadow:
    0 10px 30px rgba(127,208,105,0.25),
    inset 0 1px 0 rgba(255,255,255,0.65);
  cursor: pointer;
  transform: translateZ(0);
  transition: transform 160ms ease, box-shadow 160ms ease, filter 160ms ease;
}
.ec-btn:hover { transform: translateY(-1px); filter: saturate(1.05); }
.ec-btn:active { transform: translateY(0); filter: saturate(0.98); }
.ec-btn:focus-visible {
  outline: 2px solid color-mix(in srgb, var(--ec-gold) 70%, white);
  outline-offset: 3px;
}

.ec-btn--secondary {
  background: linear-gradient(90deg, rgba(127,208,105,0.12), rgba(244,211,94,0.12));
  color: #0f1e16;
  border: 1px solid rgba(20, 53, 36, 0.18);
  box-shadow:
    0 6px 18px rgba(20,53,36,0.10),
    inset 0 1px 0 rgba(255,255,255,0.6);
}

/* Button inner glow sweep */
.ec-btn__glow::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 14px;
  background:
    radial-gradient(120px 60px at 20% 10%, rgba(255,255,255,0.45), transparent 60%),
    linear-gradient(90deg, rgba(255,255,255,0.20), transparent 40% 60%, rgba(255,255,255,0.20));
  mix-blend-mode: soft-light;
  opacity: 0.85;
  pointer-events: none;
}

/* Status strip */
.ec-strip {
  margin-top: clamp(16px, 2.6vw, 22px);
  padding-top: 12px;
  font-size: 12.5px;
  color: #0f2a1f;
  opacity: 0.7;
  border-top: 1px dashed rgba(20, 53, 36, 0.25);
  display: flex;
  align-items: center;
  gap: 10px;
}
.ec-dot {
  width: 7px; height: 7px; border-radius: 999px;
  background: radial-gradient(circle at 40% 40%, var(--ec-gold), var(--ec-mint) 70%);
  box-shadow: 0 0 12px rgba(244,211,94,0.8), 0 0 22px rgba(127,208,105,0.7);
  display: inline-block;
}
/* === Boot Overlay â€” Sunrise Solarpunk aesthetic === */
.boot-panel {
  --ec-mint: #7fd069;
  --ec-gold: #f4d35e;
  --ec-pearl: #f5f8f7;
  --ec-ink: #0e1511;

  --tiltX: 0deg;
  --tiltY: 0deg;
  --shineX: 50%;
  --shineY: 50%;

  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
  background: linear-gradient(180deg, rgba(255,255,255,0.66), rgba(255,255,255,0.34));
  box-shadow:
    0 30px 70px rgba(18, 60, 40, 0.18),
    inset 0 1px 0 rgba(255,255,255,0.60);
  transform: perspective(1100px) rotateX(var(--tiltX)) rotateY(var(--tiltY));
  transition: transform 200ms cubic-bezier(.2,.8,.2,1), box-shadow 200ms ease;
}
.boot-panel:hover {
  box-shadow:
    0 42px 96px rgba(18, 60, 40, 0.22),
    inset 0 1px 0 rgba(255,255,255,0.75);
}

/* energy seam */
.boot-border::before {
  content: '';
  position: absolute;
  inset: -1px;
  border-radius: 29px;
  padding: 1px;
  background:
    conic-gradient(
      from 200deg at 50% 50%,
      rgba(127,208,105,0.00) 0deg,
      rgba(127,208,105,0.55) 70deg,
      rgba(244,211,94,0.70) 170deg,
      rgba(127,208,105,0.55) 270deg,
      rgba(127,208,105,0.00) 360deg
    );
  -webkit-mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
          mask-composite: exclude;
  animation: boot-rotate 10s linear infinite;
  pointer-events: none;
}
@keyframes boot-rotate { to { transform: rotate(360deg); } }

/* pointer-driven shine */
.boot-shine::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 28px;
  background: radial-gradient(
    260px 160px at var(--shineX) var(--shineY),
    rgba(255,255,255,0.35),
    rgba(255,255,255,0.06) 45%,
    transparent 60%
  );
  mix-blend-mode: soft-light;
}

/* icon + title treatment */
.boot-icon {
  background: radial-gradient(circle at 45% 30%, rgba(244,211,94,0.45), rgba(127,208,105,0.35));
  box-shadow: 0 0 18px rgba(127,208,105,0.35), inset 0 1px 0 rgba(255,255,255,0.65);
}
.boot-title-text {
  background: linear-gradient(180deg, #0e1511, #2a3c2f);
  -webkit-background-clip: text;
          background-clip: text;
  -webkit-text-fill-color: transparent;
}

/* policy link */
.boot-link {
  position: relative;
  color: #0f2a1f;
  text-underline-offset: 3px;
  font-weight: 600;
}
.boot-link::after {
  content: '';
  position: absolute;
  left: 0; right: 0; bottom: -2px; height: 1px;
  background: linear-gradient(90deg, var(--ec-mint), var(--ec-gold));
  opacity: 0.5;
  transform: scaleX(0.8);
  transform-origin: left;
  transition: transform 160ms ease, opacity 160ms ease;
}
.boot-link:hover::after { transform: scaleX(1); opacity: 0.9; }

/* accept button */
.boot-btn {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 14px 18px;
  border-radius: 999px;
  font-weight: 800;
  letter-spacing: 0.02em;
  color: #0a120e;
  border: 0;
  background: linear-gradient(90deg, var(--ec-mint), var(--ec-gold));
  box-shadow:
    0 12px 34px rgba(127,208,105,0.28),
    inset 0 1px 0 rgba(255,255,255,0.68);
  transform: translateZ(0);
  transition: transform 160ms ease, filter 160ms ease, box-shadow 160ms ease;
}
.boot-btn:hover { transform: translateY(-1px); filter: saturate(1.06); }
.boot-btn:active { transform: translateY(0); filter: saturate(0.98); }
.boot-btn:focus-visible {
  outline: 2px solid color-mix(in srgb, var(--ec-gold) 70%, white);
  outline-offset: 3px;
}
.boot-btn--disabled {
  opacity: 0.55;
  cursor: not-allowed;
  filter: grayscale(10%);
  box-shadow:
    0 8px 22px rgba(20,53,36,0.12),
    inset 0 1px 0 rgba(255,255,255,0.55);
}

.boot-btn__glow::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 999px;
  background:
    radial-gradient(120px 60px at 22% 20%, rgba(255,255,255,0.45), transparent 60%),
    linear-gradient(90deg, rgba(255,255,255,0.20), transparent 40% 60%, rgba(255,255,255,0.20));
  mix-blend-mode: soft-light;
  opacity: 0.9;
  pointer-events: none;
}

/* === Return Overlay â€” Sunrise Solarpunk === */
.return-root {
  position: fixed; inset: 0; z-index: 9998;
  display: grid; place-items: center;
  pointer-events: auto;
  font-synthesis-weight: none;
}

/* ambient */
.return-ambient { position: absolute; inset: 0; pointer-events: none; mix-blend-mode: multiply; }
.return-vignette {
  position: absolute; inset: 0;
  background: radial-gradient(1200px 600px at center, rgba(255,255,255,0.28), transparent 65%);
}
.return-grid {
  position: absolute; inset: 0; opacity: .06;
  background:
    linear-gradient(to right, transparent 49.5%, rgba(0,0,0,.55) 50%, transparent 50.5%),
    linear-gradient(to bottom, transparent 49.5%, rgba(0,0,0,.55) 50%, transparent 50.5%);
  background-size: 40px 40px;
}
.return-topbar {
  position: absolute; top: 16px; left: 16px; right: 16px;
  display: flex; justify-content: space-between; gap: 8px; pointer-events: none;
}
.return-topbar > * { pointer-events: auto; }

/* wrapper */
.return-wrap { width: min(780px, 92vw); padding: 12px; }

/* panel */
.return-panel{
  --ec-mint:#7fd069; --ec-gold:#f4d35e; --ec-ink:#0e1511;
  --tiltX:0deg; --tiltY:0deg; --shineX:50%; --shineY:50%;

  position: relative; border-radius: 28px;
  padding: clamp(26px, 4.2vw, 40px) clamp(22px, 4vw, 36px);
  backdrop-filter: blur(18px); -webkit-backdrop-filter: blur(18px);
  background: linear-gradient(180deg, rgba(255,255,255,.66), rgba(255,255,255,.34));
  box-shadow: 0 30px 70px rgba(18,60,40,.18), inset 0 1px 0 rgba(255,255,255,.60);
  transform: perspective(1100px) rotateX(var(--tiltX)) rotateY(var(--tiltY));
  transition: transform 200ms cubic-bezier(.2,.8,.2,1), box-shadow 200ms ease;
}
.return-panel:hover { box-shadow: 0 42px 96px rgba(18,60,40,.22), inset 0 1px 0 rgba(255,255,255,.75); }

/* energy seam */
.return-border::before{
  content:''; position:absolute; inset:-1px; border-radius:29px; padding:1px;
  background: conic-gradient(
    from 190deg at 50% 50%,
    rgba(127,208,105,0.00) 0deg,
    rgba(127,208,105,0.55) 70deg,
    rgba(244,211,94,0.70) 170deg,
    rgba(127,208,105,0.55) 270deg,
    rgba(127,208,105,0.00) 360deg
  );
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor; mask-composite: exclude;
  animation:return-rot 10s linear infinite; pointer-events:none;
}
@keyframes return-rot { to { transform: rotate(360deg); } }

/* shine following pointer */
.return-shine::before{
  content:''; position:absolute; inset:0; border-radius:28px;
  background: radial-gradient(260px 160px at var(--shineX) var(--shineY),
    rgba(255,255,255,.35), rgba(255,255,255,.06) 45%, transparent 60%);
  mix-blend-mode: soft-light; pointer-events:none;
}

/* header */
.return-header{ text-align:center; margin-bottom: 14px; }
.return-icon{
  width: 42px; height: 42px; border-radius: 999px; margin: 0 auto 6px;
  display: grid; place-items: center; font-size: 18px;
  background: radial-gradient(circle at 45% 30%, rgba(244,211,94,.45), rgba(127,208,105,.35));
  box-shadow: 0 0 18px rgba(127,208,105,.35), inset 0 1px 0 rgba(255,255,255,.65);
}
.return-title{
  font-weight: 800; letter-spacing: .02em; line-height: 1.05; margin: 0 0 2px;
  background: linear-gradient(180deg, #0e1511, #2a3c2f);
  -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
  font-size: clamp(30px, 6vw, 48px);
}
.return-sub{
  color:#173624; opacity:.85; font-size: clamp(14.5px, 2.2vw, 16px);
}

/* form */
.return-form{ display:grid; gap: 12px; margin-top: 10px; }
.return-inputWrap{
  position: relative; border-radius: 16px; padding: 2px;
  background: linear-gradient(90deg, rgba(127,208,105,.20), rgba(244,211,94,.20));
  box-shadow: inset 0 1px 0 rgba(255,255,255,.6);
}
.return-input{
  width: 100%; border: 0; outline: none; font: inherit; color:#0a120e;
  background: linear-gradient(180deg, rgba(255,255,255,.75), rgba(255,255,255,.55));
  border-radius: 14px; padding: 14px 14px 14px 14px;
  letter-spacing: .01em;
}
.return-input::placeholder{ color: #0f2a1f99; }
.return-inputGlow{
  position:absolute; inset: 0; border-radius: 16px; pointer-events:none; opacity:0;
  background:
    radial-gradient(120px 60px at 18% 30%, rgba(255,255,255,.35), transparent 60%),
    radial-gradient(120px 60px at 82% 70%, rgba(255,255,255,.22), transparent 60%);
  mix-blend-mode: soft-light; transition: opacity .18s ease;
}
.return-input:focus ~ .return-inputGlow,
.return-inputWrap.is-typing .return-inputGlow{ opacity: 1; }
.return-inputWrap.has-error{
  background: linear-gradient(90deg, rgba(255,65,65,.22), rgba(244,211,94,.20));
}

/* hint + error */
.return-hint{ color:#1a3b2b; opacity:.75; font-size: 12.5px; margin-top: 2px; }
.return-error{
  color:#7a1111; background: rgba(255,65,65,.10);
  border: 1px solid rgba(255,65,65,.28);
  padding: 8px 10px; border-radius: 10px; font-size: 13px;
}

/* button */
.return-btn{
  position: relative; border: 0; border-radius: 999px; cursor: pointer;
  padding: 12px 18px; font-weight: 800; letter-spacing: .02em; color:#0a120e;
  background: linear-gradient(90deg, var(--ec-mint), var(--ec-gold));
  box-shadow: 0 12px 34px rgba(127,208,105,.28), inset 0 1px 0 rgba(255,255,255,.68);
  transition: transform 160ms ease, filter 160ms ease, box-shadow 160ms ease;
}
.return-btn:hover{ transform: translateY(-1px); filter: saturate(1.06); }
.return-btn:active{ transform: translateY(0); filter: saturate(0.98); }
.return-btn:disabled{
  opacity:.6; cursor: not-allowed;
  box-shadow: 0 8px 22px rgba(20,53,36,.12), inset 0 1px 0 rgba(255,255,255,.55);
}
.return-btnGlow::before{
  content:''; position:absolute; inset:0; border-radius:999px; pointer-events:none;
  background:
    radial-gradient(120px 60px at 22% 20%, rgba(255,255,255,.45), transparent 60%),
    linear-gradient(90deg, rgba(255,255,255,.20), transparent 40% 60%, rgba(255,255,255,.20));
  mix-blend-mode: soft-light; opacity:.9;
}

/* success */
.return-matched{
  text-align:center; color:#143524; opacity:.9; font-weight:600;
  padding: 16px; border-radius: 14px;
  background: linear-gradient(180deg, rgba(255,255,255,.75), rgba(255,255,255,.55));
  box-shadow: inset 0 1px 0 rgba(255,255,255,.6);
}

/* a11y */
.sr-only{
  position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden;
  clip:rect(0,0,0,0); white-space:nowrap; border:0;
}
/* === Hub Overlay â€” Sunrise Solarpunk === */
.hub-root { position: fixed; inset: 0; z-index: 9996; pointer-events: auto; display: grid; place-items: center; }

.hub-ambient { position: absolute; inset: 0; pointer-events: none; mix-blend-mode: multiply; }
.hub-vignette {
  position: absolute; inset: 0;
  background: radial-gradient(1200px 600px at center, rgba(255,255,255,0.28), transparent 65%);
}
.hub-grid {
  position: absolute; inset: 0; opacity: .06;
  background:
    linear-gradient(to right, transparent 49.5%, rgba(0,0,0,.55) 50%, transparent 50.5%),
    linear-gradient(to bottom, transparent 49.5%, rgba(0,0,0,.55) 50%, transparent 50.5%);
  background-size: 40px 40px;
}

/* layout */
.hub-wrap { width: min(780px, 92vw); padding: 12px; }
.hub-controls { position: absolute; top: 16px; right: 16px; display: flex; gap: 8px; }

.hub-panel {
  --ec-mint:#7fd069; --ec-gold:#f4d35e; --ec-ink:#0e1511;
  --tiltX:0deg; --tiltY:0deg; --shineX:50%; --shineY:50%;

  position: relative; border-radius: 28px;
  padding: clamp(26px, 4.2vw, 40px) clamp(22px, 4vw, 36px);
  backdrop-filter: blur(18px); -webkit-backdrop-filter: blur(18px);
  background: linear-gradient(180deg, rgba(255,255,255,.66), rgba(255,255,255,.34));
  box-shadow: 0 30px 70px rgba(18,60,40,.18), inset 0 1px 0 rgba(255,255,255,.60);
  transform: perspective(1100px) rotateX(var(--tiltX)) rotateY(var(--tiltY));
  transition: transform 200ms cubic-bezier(.2,.8,.2,1), box-shadow 200ms ease;
}
.hub-panel:hover { box-shadow: 0 42px 96px rgba(18,60,40,.22), inset 0 1px 0 rgba(255,255,255,.75); }

/* energy seam */
.hub-border::before{
  content:''; position:absolute; inset:-1px; border-radius:29px; padding:1px;
  background: conic-gradient(
    from 190deg at 50% 50%,
    rgba(127,208,105,0.00) 0deg,
    rgba(127,208,105,0.55) 70deg,
    rgba(244,211,94,0.70) 170deg,
    rgba(127,208,105,0.55) 270deg,
    rgba(127,208,105,0.00) 360deg
  );
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor; mask-composite: exclude;
  animation: hub-rot 10s linear infinite; pointer-events:none;
}
@keyframes hub-rot { to { transform: rotate(360deg); } }

/* pointer-follow shine */
.hub-shine::before{
  content:''; position:absolute; inset:0; border-radius:28px; pointer-events:none;
  background: radial-gradient(260px 160px at var(--shineX) var(--shineY),
    rgba(255,255,255,.35), rgba(255,255,255,.06) 45%, transparent 60%);
  mix-blend-mode: soft-light;
}

/* header */
.hub-header { text-align: center; margin-bottom: 14px; }
.hub-icon {
  width: 44px; height: 44px; border-radius: 999px; margin: 0 auto 6px;
  display: grid; place-items: center; font-size: 18px;
  background: radial-gradient(circle at 45% 30%, rgba(244,211,94,.45), rgba(127,208,105,.35));
  box-shadow: 0 0 18px rgba(127,208,105,.35), inset 0 1px 0 rgba(255,255,255,.65);
}
.hub-title{
  font-weight: 800; letter-spacing: .02em; line-height: 1.05; margin: 0 0 2px;
  background: linear-gradient(180deg, #0e1511, #2a3c2f);
  -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
  font-size: clamp(30px, 6vw, 48px);
}
.hub-sub{ color:#173624; opacity:.85; font-size: clamp(14.5px, 2.2vw, 16px); }

/* actions */
.hub-actions { display: flex; gap: 12px; flex-wrap: wrap; justify-content: center; margin-top: 10px; }
.hub-btn{
  position: relative; border: 0; border-radius: 14px; cursor: pointer;
  padding: 14px 18px; font-weight: 800; letter-spacing: .02em; color:#0a120e;
  background: linear-gradient(90deg, var(--ec-mint), var(--ec-gold));
  box-shadow: 0 12px 34px rgba(127,208,105,.28), inset 0 1px 0 rgba(255,255,255,.68);
  transition: transform 160ms ease, filter 160ms ease, box-shadow 160ms ease;
}
.hub-btn:hover{ transform: translateY(-1px); filter: saturate(1.06); }
.hub-btn:active{ transform: translateY(0); filter: saturate(0.98); }
.hub-btnGlow::before{
  content:''; position:absolute; inset:0; border-radius:14px; pointer-events:none;
  background:
    radial-gradient(120px 60px at 22% 20%, rgba(255,255,255,.45), transparent 60%),
    linear-gradient(90deg, rgba(255,255,255,.20), transparent 40% 60%, rgba(255,255,255,.20));
  mix-blend-mode: soft-light; opacity:.9;
}
.hub-btn--secondary{
  background: linear-gradient(90deg, rgba(127,208,105,.12), rgba(244,211,94,.12));
  color: #0f1e16;
  border: 1px solid rgba(20,53,36,.18);
  box-shadow: 0 6px 18px rgba(20,53,36,.10), inset 0 1px 0 rgba(255,255,255,.6);
}

/* strip */
.hub-strip{
  margin-top: clamp(16px, 2.6vw, 22px);
  padding-top: 12px;
  font-size: 12.5px;
  color: #0f2a1f; opacity: .7; text-align: center;
  border-top: 1px dashed rgba(20,53,36,.25);
  display: flex; align-items: center; justify-content: center; gap: 10px;
}
.hub-dot {
  width: 7px; height: 7px; border-radius: 999px; display: inline-block;
  background: radial-gradient(circle at 40% 40%, #f4d35e, #7fd069 70%);
  box-shadow: 0 0 12px rgba(244,211,94,.8), 0 0 22px rgba(127,208,105,.7);
}
